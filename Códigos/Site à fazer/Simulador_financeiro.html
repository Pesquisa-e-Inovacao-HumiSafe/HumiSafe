<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Simulador financeiro </title>
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/simulador.css">
</head>

<body>
    <div class="fundo" id="inicio">
        <div class="header">
            <div class="logo-titulo">
                <img src="imagens/logo.png" alt="">
                <h1>HUMISAFE</h1>
            </div>
            <div class="container">
                <ul class="navbar">
                    <li>
                        <a href="site_institucional.html">Início</a>
                    </li>
                    <li>
                        <a href="site_institucional.html#sobrenos">Sobre Nós</a>
                    </li>
                    <li>
                        <a href="site_institucional.html#sistema">Sistema</a>
                    </li>
                    <li>
                        <a class="agora" href="Simulador_financeiro.html">Simulador</a>
                    </li>
                    <li>
                        <a href="cadastro.html">Cadastrar</a>
                    </li>
                    <li>
                        <a class="button" href="login.html">Entrar <div class="id_img_login"></div></a>
                    </li>
                </ul>
            </div>

        </div>
    </div>
    
    <div class="content">
        
        <div class="containerInput">
            
                <div class="título">
                    <h1>SIMULADOR</h1>
                    <h2>FAÇA JÁ SUA SIMULAÇÃO!</h2>
                </div>
            <div>
                Quantos pacientes em média são internados por mês:
                <br>
                <input type="number" id="input_qtdpacientes">
            </div>

            <div>
                Informe quanto você gasta em média por paciente internado:
                <br>
                <input type="number" id="input_precoporpaciente">
            </div>

            <div>
                Região onde localiza hospital:
                <br>
                <select id="localização">

                    <option> </option>
                    <option>Norte</option>
                    <option>Nordeste</option>
                    <option>Sul</option>
                    <option>Sudeste</option>
                    <option>Centro-oeste</option>
                </select>
            </div>
            <div>
                <button class="button-simular" onclick="Simular()">Simular</button>
            </div>
        </div>


        <!-- mensagem (Resultado) -->

            <div id="mensagem" class="class_mensagemBefore"></div>

    </div>

</body>

</html>

<script>
    function Simular() {
        var mensagemBefore = document.getElementById('mensagemBefore')
        var mensagem = document.getElementById('mensagem')
        var precoporpaciente = Number(input_precoporpaciente.value);
        var qtdpacientes = Number(input_qtdpacientes.value);
        var região = localização.value;
        var umidades = {
            "Norte": 85,
            "Nordeste": 80,
            "Sul": 75,
            "Sudeste": 70,
            "Centro-oeste": 78,
        }

        var risco = 0.005
        var risco_total = 0
        var umidade = umidades[região];
        var porcentagem_acima_60 = umidade - 60;
        var pacientes_infectados = 0

        if (!precoporpaciente || !qtdpacientes || região === "") {
            mensagem.innerHTML = "<div class ='containerMensagem'><div class = 'class_mensagem '><p style='color:darkred'>⚠️ Preencha todos os campos corretamente.</p>";
            return;
        }

        for (var contador = 1; porcentagem_acima_60 > contador; contador++) {

            risco_total += risco * contador;
            // 0.5% por ponto acima de 60%
        }
        pacientes_infectados = (qtdpacientes * risco_total / 100);

        var custo_irregular = precoporpaciente * 4;

        var custo_total_irregular = pacientes_infectados * custo_irregular;

        var custo_total_ideal = pacientes_infectados * precoporpaciente;

        var prejuizo = custo_total_irregular - custo_total_ideal;

        var pacientes_infectador_arredondado = Math.ceil(pacientes_infectados) 

        mensagem.innerHTML = `
            
            <div class='containerMensagem'><div class = 'class_mensagem'><h3> Simulação para a região <b style="color:black">${região}</b></h3>

                <p> Umidade média da região: <b>${umidade}%</b></p>

                <p> Risco estimado de infecção (IRAS): <b>${risco_total.toFixed(2)}%</b></p>

                <p> Pacientes internados por mês: <b>${qtdpacientes}</b></p>

                <p> Número estimado de pacientes com IRAS: <b>${pacientes_infectador_arredondado}</b></p>

                <p> Custo por paciente (sem infecção): <b>R$${precoporpaciente.toFixed(2)}</b></p>

                <p> Custo por paciente com IRAS (internação prolongada): <b style="color:black">R$${custo_irregular.toFixed(2)}</b></p>

                <p> Gasto total com IRAS: <b style="color:black">R$${custo_total_irregular.toFixed(2)}</b></p>

                <p> Gasto ideal com IRAS (se umidade fosse controlada): <b style="color:black" >R$${custo_total_ideal.toFixed(2)}</b></p>
                <hr>
                <p><b> Prejuízo causado pela umidade desregulada: <span style="color:black">R$${prejuizo.toFixed(2)}</span></b></p>
            </div>`;
    }
</script>